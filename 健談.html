<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>健談-包裝提示</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f4f4f4;
            color: #333;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .header h1 {
            color: #0056b3;
        }
        .image-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); /* 響應式圖片網格 */
            gap: 20px;
            padding: 20px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        /* 每個圖片項目的容器 */
        .image-item {
            background-color: #f9f9f9;
            border: 1px solid #eee;
            border-radius: 5px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer; /* 表示可點擊 */
        }

        .image-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .image-item img {
            width: 100%;
            height: auto;
            display: block;
            border-bottom: 1px solid #eee;
        }

        .image-item .image-name {
            padding: 10px;
            text-align: center;
            font-size: 0.9em;
            color: #555;
            word-break: break-all;
        }

        .back-button {
            display: block;
            width: fit-content;
            margin: 30px auto;
            padding: 10px 20px;
            background-color: #007bff;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            font-size: 1em;
            transition: background-color 0.2s;
        }
        .back-button:hover {
            background-color: #0056b3;
        }

        /* --- 燈箱相關樣式 --- */
        .lightbox-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8); /* 半透明黑色背景 */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000; /* 確保在最上層 */
            opacity: 0; /* 初始隱藏 */
            visibility: hidden; /* 初始隱藏 */
            transition: opacity 0.3s ease;
        }

        .lightbox-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .lightbox-content {
            /* 關鍵更改：將 content 設為 flex 容器，並讓內容垂直堆疊 */
            display: flex;
            flex-direction: column; /* 讓圖片和標題垂直排列 */
            align-items: center; /* 讓圖片和標題在容器內水平居中 */

            position: relative; /* 保持相對定位，如果將來有絕對定位子元素會需要 */
            max-width: 90%;
            max-height: 90%;
            overflow: auto; /* 當內容溢出時顯示滾動條 */
            background-color: rgba(0,0,0,0.9); /* 滾動區域的背景 */
            border-radius: 8px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            padding: 20px; /* 給圖片和邊框一些內邊距 */
            box-sizing: border-box; /* 確保 padding 包含在 max-width/height 內 */
        }

        .lightbox-content img {
            display: block; /* 讓圖片成為塊級元素 */
            margin: 0 auto; /* 水平居中圖片 */
            max-width: none; /* 允許圖片以其原始寬度顯示 */
            max-height: none; /* 允許圖片以其原始高度顯示 */
            flex-shrink: 0; /* 防止圖片在空間不足時縮小 */
            margin-bottom: 15px; /* 圖片下方與名稱的間距 */
        }

        .lightbox-close,
        .lightbox-nav {
            position: absolute; /* 按鈕依然絕對定位在 overlay 上 */
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            padding: 10px 15px;
            font-size: 1.5em;
            cursor: pointer;
            border-radius: 5px;
            transition: background-color 0.3s;
            user-select: none;
            z-index: 1001; /* 確保按鈕在圖片和標題之上 */
        }

        .lightbox-close:hover,
        .lightbox-nav:hover {
            background-color: rgba(0, 0, 0, 0.7);
        }

        .lightbox-close {
            top: 15px;
            right: 15px;
            font-size: 2em;
            padding: 5px 15px;
            border-radius: 50%;
        }

        .lightbox-nav {
            top: 50%;
            transform: translateY(-50%);
        }
        .lightbox-nav.prev {
            left: 15px;
        }

        .lightbox-nav.next {
            right: 15px;
        }

        /* 關鍵更改：圖片標題現在是 content 內的一個普通塊級元素 */
        .lightbox-caption {
            position: static; /* 移除絕對定位 */
            background-color: rgba(0, 0, 0, 0.6);
            color: white;
            padding: 8px 15px;
            border-radius: 5px;
            font-size: 1.1em;
            max-width: 100%; /* 讓名稱佔滿 content 的寬度 */
            text-align: center;
            word-break: break-word;
            flex-shrink: 0; /* 防止名稱在空間不足時縮小 */
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>健談-包裝提示</h1>
    </div>

    <div class="image-gallery" id="imageGallery">
        </div>

    <a href="客戶包裝提示.html" class="back-button">返回客戶列表</a>

    <div class="lightbox-overlay" id="lightboxOverlay">
        <div class="lightbox-content">
            <img src="" alt="" id="lightboxImage">
            <div class="lightbox-caption" id="lightboxCaption"></div>
        </div>
        <button class="lightbox-close" id="lightboxClose">&times;</button>
        <button class="lightbox-nav prev" id="lightboxPrev">&lt;</button>
        <button class="lightbox-nav next" id="lightboxNext">&gt;</button>
    </div>

    <script>
        const customerFolderName = 'prompter/jiantan';

        const imageList = [
            { fileName: 'prompter/jiantan/共通提示.jpg', displayName: '共通提示' },
            { fileName: 'prompter/jiantan/提示01.jpg', displayName: '提示01' },
            { fileName: 'prompter/jiantan/提示02.jpg', displayName: '提示02' },
            { fileName: 'prompter/jiantan/提示03.jpg', displayName: '提示03' },
             { fileName: 'prompter/jiantan/提示04.jpg', displayName: '提示04' },
                      { fileName: 'prompter/jiantan/提示05.jpg', displayName: '提示05' },
                      { fileName: 'prompter/jiantan/提示06.jpg', displayName: '提示06' },
                      { fileName: 'prompter/jiantan/提示07.jpg', displayName: '提示07' },
                      { fileName: 'prompter/jiantan/提示08.jpg', displayName: '提示08' },
                      { fileName: 'prompter/jiantan/提示09.jpg', displayName: '提示09' },
                      { fileName: 'prompter/jiantan/提示10.jpg', displayName: '提示10' },

                    // 添加更多圖片，確保 fileName 與實際檔名一致，displayName 是您希望顯示的名稱
        ];

        let currentImageIndex = 0; // 用於追蹤當前顯示的圖片索引

        const gallery = document.getElementById('imageGallery');
        const lightboxOverlay = document.getElementById('lightboxOverlay');
        const lightboxImage = document.getElementById('lightboxImage');
        const lightboxCaption = document.getElementById('lightboxCaption');
        const lightboxClose = document.getElementById('lightboxClose');
        const lightboxPrev = document.getElementById('lightboxPrev');
        const lightboxNext = document.getElementById('lightboxNext');

        function loadImages() {
            if (imageList.length === 0) {
                gallery.innerHTML = '<p style="text-align: center; color: #666; font-size: 1.2em;">此客戶目前沒有圖片可顯示。</p>';
                return;
            }
            
            imageList.forEach((item, index) => {
                const imageItem = document.createElement('div');
                imageItem.classList.add('image-item');
                imageItem.addEventListener('click', () => openLightbox(index)); 

                const img = document.createElement('img');
                img.src = `${customerFolderName}/${item.fileName}`;
                img.alt = `健談 - ${item.displayName}`; 

                const nameDiv = document.createElement('div');
                nameDiv.classList.add('image-name');
                nameDiv.textContent = item.displayName; 

                imageItem.appendChild(img);
                imageItem.appendChild(nameDiv);
                gallery.appendChild(imageItem);
            });
        }

        // 打開燈箱的函式
        function openLightbox(index) {
            currentImageIndex = index;
            showImageInLightbox(currentImageIndex);
            lightboxOverlay.classList.add('active'); // 顯示燈箱
            document.body.style.overflow = 'hidden'; // 防止滾動主頁面
        }

        // 在燈箱中顯示特定索引的圖片
        function showImageInLightbox(index) {
            if (index < 0) { 
                currentImageIndex = imageList.length - 1;
            } else if (index >= imageList.length) { 
                currentImageIndex = 0;
            } else {
                currentImageIndex = index;
            }

            const currentImage = imageList[currentImageIndex];
            lightboxImage.src = `${customerFolderName}/${currentImage.fileName}`;
            lightboxImage.alt = `健談 - ${currentImage.displayName}`;
            lightboxCaption.textContent = currentImage.displayName;

            // 每當圖片切換時，將滾動條重置到頂部
            const lightboxContent = document.getElementById('lightboxOverlay').querySelector('.lightbox-content');
            if (lightboxContent) {
                lightboxContent.scrollTop = 0;
                lightboxContent.scrollLeft = 0;
            }
        }

        // 關閉燈箱的函式
        function closeLightbox() {
            lightboxOverlay.classList.remove('active'); // 隱藏燈箱
            document.body.style.overflow = ''; // 恢復主頁面滾動
        }

        // 燈箱事件監聽器
        lightboxClose.addEventListener('click', closeLightbox);
        lightboxPrev.addEventListener('click', () => showImageInLightbox(currentImageIndex - 1)); // 上一張
        lightboxNext.addEventListener('click', () => showImageInLightbox(currentImageIndex + 1)); // 下一張

        // 點擊背景區域也關閉燈箱 (選擇性)
        lightboxOverlay.addEventListener('click', (e) => {
            // 確保只點擊到背景本身，而不是圖片或按鈕
            if (e.target === lightboxOverlay) { // 這裡只判斷點擊到背景，點擊圖片不會關閉
                closeLightbox();
            }
        });

        // 鍵盤 ESC 鍵關閉燈箱，左右箭頭鍵切換圖片
        document.addEventListener('keydown', (e) => {
            if (lightboxOverlay.classList.contains('active')) { // 確保燈箱是開啟狀態
                if (e.key === 'Escape') {
                    closeLightbox();
                } else if (e.key === 'ArrowLeft') {
                    showImageInLightbox(currentImageIndex - 1);
                } else if (e.key === 'ArrowRight') {
                    showImageInLightbox(currentImageIndex + 1);
                }
            }
        });

        // 頁面載入完成後執行 loadImages 函式
        document.addEventListener('DOMContentLoaded', loadImages);
    </script>
</body>
</html>